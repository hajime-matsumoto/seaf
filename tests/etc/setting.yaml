# vim: set ft=yaml ts=4 sts=4 sw=4 :
#
# Seaf設定ファイル
#

#===========================================
#
# デフォルトの設定
#
#===========================================
default:
    #--------------------------------
    # 基本的な設定
    #--------------------------------
    encoding : utf-8
    lang     : ja
    timezone : Asia/Tokyo

    #--------------------------------
    # プロジェクトの設定
    #--------------------------------
    project:
        root: $SEAF_PROJECT_ROOT$

    #--------------------------------
    # オートローダの設定
    #--------------------------------
    autoloader:
        libraries:
            - $project.root$/lib

    #--------------------------------
    # スタートアップの設定
    #--------------------------------
    startup:
        modules: # 起動時に有効にするモジュール
            - mailer
    #--------------------------------
    # ディレクトリの設定
    #--------------------------------
    dirs:
        var    : $project.root$/var
        tmp    : $dirs.var$/tmp
        cache  : $dirs.var$/cache
        logs   : $dirs.var$/logs
        kvs    : $dirs.var$/kvs

    writable_dirs: # 書き込み可能にするディレクトリ
        - $dirs.tmp$
        - $dirs.cache$
        - $dirs.logs$
        - $dirs.kvs$

    #--------------------------------
    # Assetの設定
    #--------------------------------
    asset:
        dirs:
            - $project.root$/assets

    #--------------------------------
    # Viewの設定
    #--------------------------------
    view:
        dirs:
            - $project.root$/views

    #--------------------------------
    # ロガーの設定
    #--------------------------------
    logger:
        writers:
            default:
                type     : echo
                level    : 'all ^ debug'

    #--------------------------------
    # ファクトリの設定
    #--------------------------------
    factory:
        definitions:
            web:
                definition: Seaf\FW\Web\Controller

    #--------------------------------
    # モジュール
    #--------------------------------
    module:
        # モジュールディレクトリ
        dirs:
            - $SEAF_MODULE_PATH$
    #--------------------------------
    # p18nの設定
    #--------------------------------
    p18n:
        defaultLang: en
        lang: ja
        langDir: $project.root$/etc/i18n.d
        dsn: 'mongo:///translation'

    #--------------------------------
    # Key Value Storeの設定
    #--------------------------------
    kvs:
        handlers:
            default:
                type: 'file'
                config:
                    path: $dirs.kvs$

    #--------------------------------
    # Cacheの設定
    #--------------------------------
    cache:
        storage:
            type: 'memcache'
            servers:
                - 'localhost:11211'
    #--------------------------------
    # SESSIONの設定
    #--------------------------------
    session:
        storage:
            type: 'memcache'
            prefix: 'session'
            servers:
                - 'localhost:11211'


    #--------------------------------
    # Databaseの設定
    #--------------------------------
    database:
        setting:
            default_connection: sql
        connectMap:
            nosql: 'mongo:///test'
            sql  : 'mysql://root:deganjue@localhost:3306/seaf_test'
        tableMap:
            access_log : nosql
            user_pre   :
                - sql
                - UserPreModel::schema()
        cache:
            storage:
                type: 'memcache'
                servers:
                    - 'localhost:11211'
        logger:
            writers:
                default:
                    type     : echo
                    level    : 'all ^ debug'
#===========================================
#
# 開発時の設定
#
#===========================================
development:

#===========================================
#
# 運用時の設定
#
#===========================================
production:
    logger:
        writers:
            default:
                type     : file
                fileName : $dirs.logs$/seaf.log
                level    : 'all ^ debug'
                mode     : a
